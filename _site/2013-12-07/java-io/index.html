<!DOCTYPE html>
<html>

<head>
    <title>Java IO</title>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="keywords" content="Java IO, java, Java,IO, RainyAlley" />
    <meta name="description" content="Java IO, java, Java,IO, " />

    <link rel="shortcut icon" type="image/x-icon" media="screen" href="http://blog.rainyalley.com/static/favicon.ico" />
    <link rel="canonical" href="http://blog.rainyalley.com/2013-12-07/java-io/" />
    <link rel="alternate" type="application/rss+xml" title="RainyAlley" href="http://blog.rainyalley.com/feed.xml"  />

    <link rel="stylesheet" type="text/css" href="http://apps.bdimg.com/libs/bootstrap/3.3.0/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="http://blog.rainyalley.com/static/octicons/octicons.css" />

    
    <link rel="stylesheet" type="text/css" href="http://blog.rainyalley.com/static/css/highlight.css" />
    

    <link rel="stylesheet" type="text/css" href="http://blog.rainyalley.com/static/css/style.css" />
    <link rel="stylesheet" type="text/css" href="http://blog.rainyalley.com/static/css/post.css" />
    
</head>

<body>
<div class="main">

    
    
    <header>
        <nav class="navbar navbar-tiffany rectangle" role="navigation">
            <div class="container">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="http://blog.rainyalley.com/">RainyAlley</a>
                    <p class="navbar-text">Developer</p>
                </div>
                <div class="collapse navbar-collapse">
                    <ul class="nav navbar-nav navbar-right">
                        
                        <li>
                        <a href="http://blog.rainyalley.com/" class="word-keep"><span class="octicon octicon-book"></span></span>&nbsp;&nbsp;Blog</a>
                        </li>
                        
                        
                        <li>
                            <a href="http://blog.rainyalley.com/archive/" class="word-keep"><span class="octicon octicon-repo"></span>&nbsp;&nbsp;Archive</a>
                        </li>
                        
                        
                        
                        <li>
                            <a href="http://blog.rainyalley.com/category/" class="word-keep"><span class="octicon octicon-list-unordered"></span>&nbsp;&nbsp;Category</a>
                        </li>
                        
                        
                        
                        <li>
                            <a href="http://blog.rainyalley.com/tags/" class="word-keep"><span class="octicon octicon-tag"></span>&nbsp;&nbsp;Tag</a>
                        </li>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <li><a href="#stq=" class="search-button"><span class="octicon octicon-search"></span></a></li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>



    <div class="container">
        <div class="row">
    <div class="content col-lg-9">
        <div class="sheet post">
          <header>
            <h2>Java IO</h2>
            <p class="post-meta">
                <span class="octicon octicon-clock"></span> Dec 7, 2013
            </p>
            <p class="post-tag">
                <span><a href="http://blog.rainyalley.com/category/#java"><span class="octicon octicon-list-unordered"></span>&nbsp;java</a></span>
                <span>
                    <a class="word-keep" href="http://blog.rainyalley.com/tags/#Java"><span class="octicon octicon-tag"></span>&nbsp;Java</a>
                    
                    <a class="word-keep" href="http://blog.rainyalley.com/tags/#IO"><span class="octicon octicon-tag"></span>&nbsp;IO</a>
                    
                </span>
            </p>
          </header>
          <hr class="boundary">
          <article>
            <div class="toc"></div>

<p><img src="http://blog.rainyalley.com/static/img/i0.jpg" alt="io"></p>

<h1 id="io流的分类">IO流的分类</h1>

<p>根据处理数据类型的不同分为：字符流和字节流</p>

<p>根据数据流向不同分为：输入流和输出流</p>

<h2 id="字符流和字节流">字符流和字节流</h2>

<p>字符流的由来： 因为数据编码的不同，而有了对字符进行高效操作的流对象。本质其实就是基于字节流读取时，去查了指定的码表。 字节流和字符流的区别：</p>

<ul>
<li><p>读写单位不同：字节流以字节（8bit）为单位，字符流以字符为单位，根据码表映射字符，一次可能读多个字节。</p></li>
<li><p>处理对象不同：字节流能处理所有类型的数据（如图片、avi等），而字符流只能处理字符类型的数据。</p></li>
</ul>

<p>结论：只要是处理纯文本数据，就优先考虑使用字符流。 除此之外都使用字节流。</p>

<h2 id="输入流和输出流">输入流和输出流</h2>

<p>对输入流只能进行读操作，对输出流只能进行写操作，程序中需要根据待传输数据的不同特性而使用不同的流。</p>

<h1 id="字节流">字节流</h1>

<h2 id="输入">输入</h2>

<ul>
<li><p><code class="prettyprint">InputStream</code> 是所有的输入字节流的父类，它是一个抽象类。</p></li>
<li><p><code class="prettyprint">ByteArrayInputStream</code>、<br/><code class="prettyprint">StringBufferInputStream</code>、<br/><code class="prettyprint">FileInputStream</code> 是三种基本的介质流，它们分别从Byte 数组、StringBuffer、和本地文件中读取数据。<code class="prettyprint">PipedInputStream</code> 是从与其它线程共用的管道中读取数据</p></li>
<li><p><code class="prettyprint">ObjectInputStream</code> 和所有<code class="prettyprint">FilterInputStream</code> 的子类都是装饰流（装饰器模式的主角）</p></li>
</ul>

<h2 id="输出">输出</h2>

<ul>
<li><p><code class="prettyprint">OutputStream</code> 是所有的输出字节流的父类，它是一个抽象类。</p></li>
<li><p><code class="prettyprint">ByteArrayOutputStream</code>、<br/><code class="prettyprint">FileOutputStream</code> 是两种基本的介质流，它们分别向Byte 数组、和本地文件中写入数据。<code class="prettyprint">PipedOutputStream</code> 是向与其它线程共用的管道中写入数据，</p></li>
<li><p><code class="prettyprint">ObjectOutputStream</code> 和所有<code class="prettyprint">FilterOutputStream</code> 的子类都是装饰流。</p></li>
</ul>

<h2 id="配对">配对</h2>

<p><img src="http://blog.rainyalley.com/static/img/io-match.jpg" alt="io-match"></p>

<p>图中蓝色的为主要的对应部分，红色的部分就是不对应部分。紫色的虚线部分代表这些流一般要搭配使用。</p>

<ul>
<li><p><code class="prettyprint">LineNumberInputStream</code> 主要完成从流中读取数据时，会得到相应的行号，至于什么时候分行、在哪里分行是由改类主动确定的，并不是在原始中有这样一个行号。在输出部分没有对应的部分，我们完全可以自己建立一个LineNumberOutputStream，在最初写入时会有一个基准的行号，以后每次遇到换行时会在下一行添加一个行号，看起来也是可以的。好像更不入流了。</p></li>
<li><p><code class="prettyprint">PushbackInputStream</code> 的功能是查看最后一个字节，不满意就放回流中。主要用在编译器的语法、词法分析部分。输出部分的BufferedOutputStream 几乎实现相近的功能。（预读，可以将读取内容的一部分放回流的开头，下回重读）</p></li>
<li><p><code class="prettyprint">StringBufferInputStream</code> 已经被Deprecated，本身就不应该出现在InputStream 部分，主要因为String 应该属于字符流的范围。已经被废弃了，当然输出部分也没有必要需要它了！还允许它存在只是为了保持版本的向下兼容而已。</p></li>
<li><p><code class="prettyprint">SequenceInputStream</code> 可以认为是一个工具类，将两个或者多个输入流当成一个输入流依次读取。完全可以从IO 包中去除，还完全不影响IO 包的结构，却让其更“纯洁”――纯洁的Decorator 模式。</p></li>
<li><p><code class="prettyprint">PrintStream</code> 也可以认为是一个辅助工具。主要可以向其他输出流，或者FileInputStream 写入数据，本身内部实现还是带缓冲的。本质上是对其它流的综合运用的一个工具而已。一样可以踢出IO 包！System.out 和System.out 就是PrintStream 的实例！</p></li>
</ul>

<h1 id="字符流">字符流</h1>

<h2 id="输入">输入</h2>

<ul>
<li><p><code class="prettyprint">Reader</code> 是所有的输入字符流的父类，它是一个抽象类。</p></li>
<li><p><code class="prettyprint">CharReader</code>、<code class="prettyprint">StringReader</code> 是两种基本的介质流，它们分别将Char 数组、String中读取数据。<code class="prettyprint">PipedReader</code>是从与其它线程共用的管道中读取数据。</p></li>
<li><p><code class="prettyprint">BufferedReader</code> 很明显就是一个装饰器，它和其子类负责装饰其它Reader 对象。</p></li>
<li><p><code class="prettyprint">FilterReader</code> 是所有自定义具体装饰流的父类，其子类PushbackReader 对Reader 对象进行装饰，会增加一个行号。</p></li>
<li><p><code class="prettyprint">InputStreamReader</code> 是一个连接字节流和字符流的桥梁，它将字节流转变为字符流（<code class="prettyprint">转换流</code>）。<code class="prettyprint">FileReader</code> 可以说是一个达到此功能、常用的工具类，在其源代码中明显使用了将FileInputStream`转变为Reader 的方法。</p></li>
</ul>

<h2 id="输出">输出</h2>

<ul>
<li><p><code class="prettyprint">Writer</code> 是所有的输出字符流的父类，它是一个抽象类。</p></li>
<li><p><code class="prettyprint">CharArrayWriter</code>、<code class="prettyprint">StringWriter</code> 是两种基本的介质流，它们分别向Char 数组、String 中写入数据。PipedWriter 是向与其它线程共用的管道中写入数据，</p></li>
<li><p><code class="prettyprint">BufferedWriter</code> 是一个装饰器为Writer 提供缓冲功能。</p></li>
<li><p><code class="prettyprint">PrintWriter</code> 和<code class="prettyprint">PrintStream</code> 极其类似，功能和使用也非常相似。</p></li>
<li><p><code class="prettyprint">OutputStreamWriter</code> 是OutputStream 到Writer 转换的桥梁（<code class="prettyprint">转换流</code>），它的子类<code class="prettyprint">FileWriter</code> 其实就是一个实现此功能的具体类。</p></li>
</ul>

<h2 id="配对">配对</h2>

<p><img src="http://blog.rainyalley.com/static/img/io-match-2.jpg" alt="io-match-2"></p>

<h1 id="randomaccessfile">RandomAccessFile</h1>

<p>该类并不是流体系中的一员，其封装了字节流，同时还封装了一个缓冲区（字符数组），通过内部的指针来操作字符数组中的数据。 该对象特点：</p>

<ul>
<li><p>该对象只能操作文件，所以构造函数接收两种类型的参数：a.字符串文件路径；b.File对象。</p></li>
<li><p>该对象既可以对文件进行读操作，也能进行写操作，在进行对象实例化时可指定操作模式(r,rw)</p></li>
</ul>

<p><strong>注意</strong>：该对象在实例化时，如果要操作的文件不存在，会自动创建；如果文件存在，写数据未指定位置，会从头开始写，即覆盖原有的内容。 可以用于多线程下载或多个线程同时写数据到文件。</p>

<h1 id="管道">管道</h1>

<p>Java的I/O库提供了一个称做链接（Chaining）的机制，可以将一个流处理器跟另一个流处理器首尾相接，以其中之一的输出为输入，形成一个 流管道的链接。</p>

<p>例如，<code class="prettyprint">DataInputStream</code>流处理器可以把<code class="prettyprint">FileInputStream</code>流对象的输出当作输入，将Byte类型的数据转换成Java的原始类型和String类型的数据。</p>

<h1 id="设计模式">设计模式</h1>

<p>Java I/O库的两个设计模式：</p>

<ul>
<li><p><code class="prettyprint">装饰者模式</code>：也叫<strong>包装器模式</strong>，在由InputStream，OutputStream，Reader和Writer代表的等级结构内部，有一些流处理器可以 对另一些流处理器起到装饰作用，形成新的，具有改善了的功能的流处理器。装饰者模式是Java I/O库的整体设计模式。</p></li>
<li><p><code class="prettyprint">适配器模式</code>：在由InputStream，OutputStream，Reader和Writer代表的等级结构内部，有一些流处理器是对其它类型的流源的适配。</p></li>
</ul>

          </article>
          <hr class="boundary">
          <div id="post-share" class="bdsharebuttonbox">
              <a href="#" class="bds_more" data-cmd="more"></a>
              <a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a>
              <a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信"></a>
              <a href="#" class="bds_douban" data-cmd="douban" title="分享到豆瓣网"></a>
              <a href="#" class="bds_fbook" data-cmd="fbook" title="分享到Facebook"></a>
              <a href="#" class="bds_copy" data-cmd="copy" title="分享到复制网址"></a>
          </div>
        </div>
        <div class="pad-min"></div>
        <div id="post-comment" class="sheet post">
            <div id="disqus_thread"></div>
        </div>
    </div>
    <div class="content-navigation col-lg-3">
      <div class="shadow-bottom-center" >
        <div class="content-navigation-toc">
            <div class="content-navigation-header">
                <span class="octicon octicon-list-unordered"></span>&nbsp;Toc
            </div>
            <div class="content-navigation-list toc"></div>
        </div>
        <div class="content-navigation-tag">
            <div class="content-navigation-header">
                <span class="octicon octicon-list-unordered"></span>&nbsp;Tags
            </div>
            <div class="content-navigation-list">
                <ul>
                    
                    <li>
                        <a class="word-keep" href="http://blog.rainyalley.com/tags#Java"><span class="octicon octicon-tag"></span>&nbsp;Java</a>
                    </li>
                    
                    <li>
                        <a class="word-keep" href="http://blog.rainyalley.com/tags#IO"><span class="octicon octicon-tag"></span>&nbsp;IO</a>
                    </li>
                    
                </ul>
            </div>
        </div>
        <div class="content-navigation-related">
            <div class="content-navigation-header">
                <span class="octicon octicon-list-unordered"></span>&nbsp;Related
            </div>
            <div class="content-navigation-list">
                <ul>
                    

                    
                        
                            

                            
                                
                            
                                
                            
                                
                            
                                
                            

                            
                                
                            

                            
                        
                    
                        
                            

                            
                                
                            
                                
                            

                            
                                
                            

                            
                        
                    
                        
                            

                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            

                            
                                
                            

                            
                        
                    
                        
                            

                            
                                
                            
                                
                                    
                                
                            

                            
                                
                                    
                                
                            

                            
                                
                            
                        
                    
                        
                            

                            
                                
                            
                                
                            
                                
                                    
                                
                            

                            
                                
                            

                            
                                
                            
                        
                    
                        
                            

                            
                                
                            
                                
                            
                                
                                    
                                
                            

                            
                                
                            

                            
                                
                            
                        
                    
                        
                            

                            
                                
                            
                                
                            
                                
                                    
                                
                            

                            
                                
                                    
                                
                            

                            
                                
                            
                        
                    
                        
                            

                            
                                
                            
                                
                                    
                                
                            
                                
                            

                            
                                
                                    
                                
                            

                            
                                
                            
                        
                    
                        
                            

                            
                                
                            
                                
                            
                                
                                    
                                
                            

                            
                                
                            

                            
                                
                            
                        
                    
                        
                            

                            
                                
                            
                                
                            

                            
                                
                            

                            
                        
                    
                        
                            

                            
                                
                            
                                
                            
                                
                            

                            
                                
                            

                            
                        
                    
                        
                            

                            
                                
                            
                                
                            
                                
                            

                            
                                
                            

                            
                        
                    
                        
                            

                            
                                
                            
                                
                            
                                
                            

                            
                                
                            

                            
                        
                    
                        
                            

                            
                                
                            
                                
                                    
                                
                            

                            
                                
                            

                            
                                
                            
                        
                    
                        
                            

                            
                                
                                    
                                
                            
                                
                            

                            
                                
                                    
                                
                            

                            
                                
                            
                        
                    
                        
                            

                            
                                
                                    
                                
                            
                                
                            

                            
                                
                                    
                                
                            

                            
                                
                            
                        
                    
                        
                            

                            
                                
                            
                                
                            
                                
                            
                                
                            

                            
                                
                            

                            
                        
                    
                        
                            

                            
                                
                            
                                
                            
                                
                            

                            
                                
                            

                            
                        
                    
                        
                            

                            
                                
                            
                                
                            
                                
                            

                            
                                
                            

                            
                        
                    
                        
                            

                            
                                
                            
                                
                                    
                                
                            

                            
                                
                                    
                                
                            

                            
                                
                            
                        
                    
                        
                            

                            
                                
                            
                                
                                    
                                
                            

                            
                                
                                    
                                
                            

                            
                                
                            
                        
                    
                        
                            

                            
                                
                            
                                
                            
                                
                            

                            
                                
                            

                            
                        
                    
                        
                            

                            
                                
                            
                                
                            
                                
                                    
                                
                            

                            
                                
                                    
                                
                            

                            
                                
                            
                        
                    
                        
                            

                            
                                
                            
                                
                            

                            
                                
                            

                            
                        
                    
                        
                            

                            
                                
                            
                                
                            
                                
                            

                            
                                
                            

                            
                        
                    
                        
                            

                            
                                
                            
                                
                                    
                                
                            
                                
                            

                            
                                
                            

                            
                                
                            
                        
                    
                        
                            

                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            

                            
                                
                            

                            
                        
                    
                        
                            

                            
                                
                                    
                                
                            
                                
                            
                                
                            

                            
                                
                                    
                                
                            

                            
                                
                            
                        
                    
                        
                            

                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                                    
                                
                            

                            
                                
                                    
                                
                            

                            
                                
                            
                        
                    
                        
                            

                            
                                
                            

                            
                                
                            

                            
                        
                    
                        
                            

                            
                                
                            
                                
                            

                            
                                
                            

                            
                        
                    
                        
                            

                            
                                
                            
                                
                            

                            
                                
                            

                            
                        
                    
                        
                            

                            
                                
                            
                                
                            

                            
                                
                            

                            
                        
                    
                        
                            

                            
                                
                            
                                
                            

                            
                                
                            

                            
                        
                    
                        
                            

                            
                                
                            
                                
                            

                            
                                
                            

                            
                        
                    
                        
                            

                            
                                
                            

                            
                                
                            

                            
                        
                    
                        
                            

                            
                                
                            
                                
                            

                            
                                
                            

                            
                        
                    
                        
                            

                            
                                
                            
                                
                            

                            
                                
                            

                            
                        
                    
                        
                            

                            
                                
                                    
                                
                            
                                
                            

                            
                                
                                    
                                
                            

                            
                                
                            
                        
                    
                        
                    
                        
                            

                            
                                
                            
                                
                            

                            
                                
                            

                            
                        
                    

                    
                        
                            <li>
                                <a class="word-keep" href="http://blog.rainyalley.com/2015-04-09/rmi/">RMI</a>
                            </li>
                        
                            <li>
                                <a class="word-keep" href="http://blog.rainyalley.com/2015-03-17/servlet-encode/">Servlet乱码分析</a>
                            </li>
                        
                            <li>
                                <a class="word-keep" href="http://blog.rainyalley.com/2015-03-12/spring-security/">spring security 探秘</a>
                            </li>
                        
                            <li>
                                <a class="word-keep" href="http://blog.rainyalley.com/2015-03-05/validator/">Bean Validation</a>
                            </li>
                        
                            <li>
                                <a class="word-keep" href="http://blog.rainyalley.com/2015-02-22/javajs/">Java中用js解析json</a>
                            </li>
                        
                            <li>
                                <a class="word-keep" href="http://blog.rainyalley.com/2015-02-13/sqlappend/">SQL 拼接</a>
                            </li>
                        
                            <li>
                                <a class="word-keep" href="http://blog.rainyalley.com/2014-12-21/webservice/">WebService</a>
                            </li>
                        
                            <li>
                                <a class="word-keep" href="http://blog.rainyalley.com/2014-12-13/java-newfeature/">Java8 新特性</a>
                            </li>
                        
                            <li>
                                <a class="word-keep" href="http://blog.rainyalley.com/2014-11-18/java-concurrent/">Java Concurrent</a>
                            </li>
                        
                            <li>
                                <a class="word-keep" href="http://blog.rainyalley.com/2014-08-20/jvm/">Java虚拟机</a>
                            </li>
                        
                            <li>
                                <a class="word-keep" href="http://blog.rainyalley.com/2014-06-26/effective/">Effective Java</a>
                            </li>
                        
                            <li>
                                <a class="word-keep" href="http://blog.rainyalley.com/2014-05-12/acturl-generic/">超类中的泛型</a>
                            </li>
                        
                            <li>
                                <a class="word-keep" href="http://blog.rainyalley.com/2014-04-15/fileupload/">Custom Fileupload</a>
                            </li>
                        
                            <li>
                                <a class="word-keep" href="http://blog.rainyalley.com/2014-03-22/reentrantlock/">可重入锁</a>
                            </li>
                        
                            <li>
                                <a class="word-keep" href="http://blog.rainyalley.com/2014-03-16/tomcat-https/">Tomcat Https 配置</a>
                            </li>
                        
                    
                </ul>
            </div>
        </div>
      </div>
    </div>
</div>
    </div>

    <div class="page-scrollTop" data-toggle="tooltip" data-placement="top" title="Top">
        <a href="javascript:void(0);">
            <div class="arrow"></div>
            <div class="stick"></div>
        </a>
    </div>
</div>

    <footer  class="footnote footnote-tiffany">
        <div class="container">
                <a class="foot-item" href="mailto:dubuyuye@yeah.net" target="_blank"><span class="octicon octicon-mail"></span></a>
                <a class="foot-item" href="https://github.com/dubuyuye" target="_blank"><span class="octicon octicon-mark-github"></span></a>
                <a class="foot-item" href="http://blog.rainyalley.com/feed.xml" target="_blank"><span class="octicon octicon-rss"></span></a>
                <a class="foot-item" href="http://blog.rainyalley.com/link/"><span class="octicon octicon-link-external"></span></a>
                &nbsp;
                <a href="http://blog.rainyalley.com/"><span class="word-keep">&copy; RainyAlley</span></a>
        </div>
    </footer>


<div class="scriptHub">
    <script type="text/javascript" src="http://apps.bdimg.com/libs/jquery/1.11.3/jquery.js"></script>
    <script type="text/javascript" src="http://apps.bdimg.com/libs/bootstrap/3.3.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="http://blog.rainyalley.com/static/js/script.js"></script>
    <script type="text/javascript" src="http://blog.rainyalley.com/static/js/toc.js"></script>
    <script type="text/javascript" src="http://blog.rainyalley.com/static/js/post.js"></script>
    
</div>



</body>
</html>
